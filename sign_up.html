<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title></title>



 <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">



        
 <link rel="stylesheet" type="text/css" href="node_modules\font-awesome\css\font-awesome.min.css">
  <script src="node_modules\jquery\dist\jquery.min.js"></script>
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
          
  
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
 <script src="js\config_firebase.js"></script>



</head>
<body>


   <div class="container">

    <div style=" text-align: center; margin-bottom: 100px; margin-top: 63px; ">
      <h1><i class="fa fa-user-plus" aria-hidden="true"></i> Sign up</h1>
    </div>

    <div class="row">

          <form class="col s12">
      <div class="row">
        <div class="input-field col s6">
          <input  id="first_name" type="text" class="validate">
          <label for="first_name">First Name</label>
        </div>
        <div class="input-field col s6">
          <input id="last_name" type="text" class="validate">
          <label for="last_name">Last Name</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12">
          <input id="email" type="email" class="validate">
          <label for="email">Email</label>
        </div>
      </div>
       <div class="input-field col s12">
          <input id="phone" type="text" class="validate">
          <label for="text">Phone</label>
        </div>
      <div class="row">
        <div class="input-field col s12">
          <input id="password" type="password" class="validate">
          <label for="password">Password</label>
        </div>
      </div>
      
     <a class="waves-effect waves-light btn" onclick="signUp()"><i class="fa fa-user-plus" aria-hidden="true"></i> Create account</a>
     <div><p style=" color: #000000a6; font-size: 16px; padding-top: 10px; " >I've account</p>
<a class="waves-effect waves-light btn" onclick="window.location.assign('sign_in.html');"><i class="fa fa-sign-in" aria-hidden="true"></i> Sign in</a>
     </div>
    </form>

  </div>
  </div>








    </body>

    <script type="text/javascript">

function dataSet(first_name ,last_name , phone ) {
  var user = firebase.auth().currentUser;
  var uid = user.uid;
  var d = new Date();
var textDate = d.toDateString();

 var data = { first_name: first_name , last_name: last_name , phone:phone ,lat:32.5391395, lng:35.8565256    };

var MyPath = firebase.database().ref("Customer/" + uid + "/");
MyPath.set(data).then(function() {
    console.log(data);
   window.location.assign('welcome.html');
  })
  .catch(function(error) {
    console.log("failed: " + error.message);
     alert (error);
  });


  // body...
}



      function signUp() {
       
var email = $('#email').val();
var password = $('#password').val();
var first_name = $('#first_name').val();
var last_name = $('#last_name').val();
var phone = $('#phone').val();

firebase.auth().createUserWithEmailAndPassword(email, password).then(function() {

dataSet(first_name ,last_name , phone );
  
}, function(error) {
  console.log(' An error happened.' , error);
 alert (error);

 // $('#email').val('');
 // $('#password').val('');

});


      }





    </script>
    </html>